.guide-page {
  background:#0d1117;
  color:#e6edf7;
  font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  margin:0;
  min-height:100vh;
}

.guide-header {
  padding:32px 10vw 24px;
  background:linear-gradient(135deg,#1f2b4d 0%,#141e2f 100%);
  text-align:center;
  border-bottom:1px solid rgba(255,255,255,0.08);
}

.guide-header h1 {
  margin:0 0 8px;
  font-size:2.4rem;
}

.guide-header .tagline {
  margin:0 auto 16px;
  max-width:640px;
  color:#9fb4e3;
}

.guide-header .btn {
  padding:10px 20px;
  border-radius:6px;
  border:1px solid #4f63a9;
  background:#1a2c52;
  color:#cfe2ff;
  cursor:pointer;
  transition:background 0.2s ease;
}

.guide-header .btn:hover {
  background:#24376a;
}

.guide-layout {
  display:grid;
  grid-template-columns: minmax(220px, 280px) 1fr;
  gap:0;
}

.guide-nav {
  padding:32px 24px;
  border-right:1px solid rgba(255,255,255,0.05);
  position:sticky;
  top:0;
  height:100vh;
  overflow-y:auto;
  background:#0f1524;
}

.guide-toc {
  list-style:none;
  margin:0;
  padding:0;
  display:flex;
  flex-direction:column;
  gap:8px;
}

.guide-toc a {
  color:#9fb4e3;
  text-decoration:none;
  font-weight:500;
  padding:6px 8px;
  border-radius:4px;
  transition:background 0.2s ease;
}

.guide-toc a:hover,
.guide-toc a:focus {
  background:rgba(79,99,169,0.2);
}

.guide-content {
  padding:32px 10vw;
  display:flex;
  flex-direction:column;
  gap:48px;
}

.guide-section h2 {
  margin-top:0;
  margin-bottom:12px;
  font-size:1.8rem;
  color:#cfe2ff;
}

.guide-section p {
  line-height:1.6;
}

.guide-intro-list {
  margin:16px 0 0;
  padding-left:20px;
  display:grid;
  gap:6px;
  color:#bcccf3;
}

.guide-callout {
  border-left:4px solid #4f63a9;
  padding:12px 16px;
  background:rgba(79,99,169,0.1);
  border-radius:4px;
  margin-top:16px;
}

.code-placeholder,
.demo-placeholder,
.exercise-grid {
  margin-top:16px;
  padding:16px;
  border-radius:6px;
  background:#111a2b;
  border:1px solid rgba(255,255,255,0.06);
  min-height:120px;
}

.presence-demo {
  display:flex;
  flex-direction:column;
  gap:16px;
}

.presence-demo__controls {
  display:flex;
  flex-wrap:wrap;
  gap:16px;
}

.presence-demo__controls label {
  display:flex;
  flex-direction:column;
  font-size:0.9rem;
  color:#c9d8ff;
  gap:4px;
}

.presence-demo__controls input[type="range"] {
  width:200px;
}

.presence-demo__controls .value {
  font-family:'JetBrains Mono', 'Fira Code', monospace;
  color:#9fb4e3;
}

.presence-demo__controls .checkbox {
  align-self:flex-end;
  flex-direction:row;
  align-items:center;
  gap:6px;
}

.presence-demo__summary {
  display:flex;
  gap:24px;
  font-size:0.95rem;
}

.presence-demo__summary .label {
  color:#9fb4e3;
  margin-right:6px;
}

.presence-demo__table {
  width:100%;
  border-collapse:collapse;
  font-size:0.9rem;
}

.presence-demo__table th,
.presence-demo__table td {
  padding:6px 8px;
  border-bottom:1px solid rgba(255,255,255,0.06);
  text-align:left;
}

.dominance-demo {
  display:flex;
  flex-direction:column;
  gap:16px;
}

.dominance-demo__summary {
  display:flex;
  flex-wrap:wrap;
  gap:16px;
  font-size:0.95rem;
}

.dominance-demo__summary-item strong,
.dominance-demo__summary-item code {
  color:#f0f6ff;
  font-family:'JetBrains Mono', 'Fira Code', monospace;
}

.dominance-demo__vectors {
  display:flex;
  gap:16px;
  font-family:'JetBrains Mono', 'Fira Code', monospace;
  font-size:0.9rem;
  color:#9fb4e3;
}

.dominance-demo__offsets {
  display:flex;
  flex-wrap:wrap;
  align-items:center;
  gap:12px;
}

.dominance-demo__offsets label {
  display:flex;
  flex-direction:column;
  gap:4px;
  font-size:0.85rem;
  color:#c9d8ff;
}

.dominance-demo__offsets input[type="range"] {
  width:180px;
}

.dominance-demo__offset-value {
  font-family:'JetBrains Mono', 'Fira Code', monospace;
  color:#9fb4e3;
}

.dominance-demo__checkbox {
  display:flex;
  flex-direction:row;
  align-items:center;
  gap:6px;
  font-size:0.85rem;
}

.dominance-demo__tooltip {
  display:inline-flex;
  align-items:center;
  justify-content:center;
  width:16px;
  height:16px;
  margin-left:6px;
  border-radius:50%;
  background:rgba(159,180,227,0.2);
  color:#cfe2ff;
  font-size:0.7rem;
  line-height:1;
  font-family:'JetBrains Mono', 'Fira Code', monospace;
  cursor:help;
  position:relative;
  border:1px solid rgba(207,226,255,0.3);
  outline:none;
}

.dominance-demo__tooltip:focus,
.dominance-demo__tooltip:hover {
  background:rgba(159,180,227,0.35);
}

.dominance-demo__tooltip::after {
  content:attr(data-tooltip);
  position:absolute;
  left:50%;
  bottom:calc(100% + 8px);
  transform:translateX(-50%) translateY(4px);
  opacity:0;
  visibility:hidden;
  pointer-events:none;
  background:rgba(12,22,38,0.95);
  color:#e3ebff;
  padding:8px 10px;
  border-radius:6px;
  width:220px;
  max-width:260px;
  font-size:0.75rem;
  line-height:1.3;
  text-align:left;
  box-shadow:0 6px 18px rgba(0,0,0,0.35);
  transition:opacity 0.16s ease, transform 0.16s ease;
  z-index:10;
}

.dominance-demo__tooltip::before {
  content:'';
  position:absolute;
  left:50%;
  bottom:calc(100% + 4px);
  transform:translateX(-50%);
  border-width:6px;
  border-style:solid;
  border-color:rgba(12,22,38,0.95) transparent transparent transparent;
  opacity:0;
  visibility:hidden;
  transition:opacity 0.16s ease;
  z-index:9;
}

.dominance-demo__tooltip:hover::after,
.dominance-demo__tooltip:hover::before,
.dominance-demo__tooltip:focus::after,
.dominance-demo__tooltip:focus::before {
  opacity:1;
  visibility:visible;
  transform:translateX(-50%) translateY(0);
}

.dominance-demo .btn {
  padding:6px 12px;
  border-radius:4px;
  background:#1a2c52;
  border:1px solid #4f63a9;
  color:#cfe2ff;
  cursor:pointer;
}

.dominance-demo .btn:hover {
  background:#233462;
}

.dominance-demo__faction-list {
  display:grid;
  grid-template-columns:repeat(auto-fit, minmax(220px, 1fr));
  gap:12px;
}

.dominance-demo__faction {
  background:rgba(12,22,38,0.85);
  border:1px solid rgba(255,255,255,0.06);
  border-radius:8px;
  padding:12px;
  transition:border-color 0.18s ease, box-shadow 0.18s ease, transform 0.18s ease;
}

.dominance-demo__faction.is-dominant {
  border-color:rgba(120,255,170,0.85);
  box-shadow:0 0 12px rgba(120,255,170,0.25);
  transform:translateY(-2px);
}

.dominance-demo__faction.is-opposing {
  border-color:rgba(255,128,128,0.35);
}

.dominance-demo__faction-header {
  display:flex;
  align-items:center;
  gap:8px;
  font-size:0.95rem;
  color:#e3ebff;
}

.dominance-demo__swatch {
  width:14px;
  height:14px;
  border-radius:50%;
  box-shadow:0 0 6px rgba(0,0,0,0.45);
}

.dominance-demo__status {
  margin-left:auto;
  font-size:0.75rem;
  text-transform:uppercase;
  letter-spacing:0.05em;
  color:#9fb4e3;
}

.dominance-demo__faction.is-dominant .dominance-demo__status {
  color:#7dffb2;
}

.dominance-demo__faction.is-opposing .dominance-demo__status {
  color:#ff8080;
}

.dominance-demo__slider {
  display:flex;
  align-items:center;
  gap:8px;
  margin:10px 0;
}

.dominance-demo__phase {
  font-size:0.78rem;
  color:#9fb4e3;
  display:flex;
  align-items:center;
  gap:6px;
  margin-top:6px;
  font-family:'JetBrains Mono', 'Fira Code', monospace;
}

.dominance-demo__phase code {
  color:#cfe2ff;
}

.dominance-demo__checkbox--details {
  margin-left:auto;
  font-size:0.85rem;
  color:#c9d8ff;
}

.dominance-demo__slider input[type="range"] {
  flex:1;
}

.dominance-demo__slider-value {
  width:3.2rem;
  text-align:right;
  font-family:'JetBrains Mono', 'Fira Code', monospace;
  color:#9fb4e3;
}

.dominance-demo__metric {
  font-size:0.85rem;
  color:#c9d8ff;
}

.dominance-demo__details {
  margin-top:12px;
  border-top:1px solid rgba(255,255,255,0.05);
  padding-top:10px;
}

.dominance-demo__details-toggle {
  background:none;
  border:1px solid rgba(159,180,227,0.3);
  border-radius:4px;
  color:#cfe2ff;
  padding:4px 10px;
  font-size:0.85rem;
  cursor:pointer;
  display:inline-flex;
  align-items:center;
  gap:6px;
}

.dominance-demo__details-toggle.is-active {
  background:rgba(159,180,227,0.2);
}

.dominance-demo__details-toggle[disabled] {
  opacity:0.6;
  cursor:not-allowed;
}

.dominance-demo__details-body {
  margin-top:10px;
  display:flex;
  flex-direction:column;
  gap:16px;
  background:rgba(8,16,28,0.65);
  border:1px solid rgba(159,180,227,0.12);
  border-radius:8px;
  padding:12px;
}

.dominance-demo__wall-note {
  background:rgba(255,130,130,0.12);
  border:1px solid rgba(255,130,130,0.35);
  color:#ffb0b0;
  font-size:0.78rem;
  padding:6px 8px;
  border-radius:4px;
}

.dominance-demo__steps {
  list-style:none;
  margin:0;
  padding:0;
  display:flex;
  flex-direction:column;
  gap:6px;
}

.dominance-demo__step {
  font-size:0.82rem;
  color:#e3ebff;
  background:rgba(24,40,68,0.6);
  border-radius:4px;
  padding:6px 8px;
  border-left:3px solid rgba(159,180,227,0.35);
}

.dominance-demo__vector-card {
  display:flex;
  gap:12px;
  align-items:center;
  flex-wrap:wrap;
}

.dominance-demo__vector {
  width:140px;
  height:140px;
  background:rgba(12,22,38,0.85);
  border-radius:8px;
  border:1px solid rgba(159,180,227,0.12);
}

.dominance-demo__vector-circle {
  fill:none;
  stroke:rgba(159,180,227,0.18);
  stroke-dasharray:4 4;
}

.dominance-demo__axis {
  stroke:rgba(159,180,227,0.12);
  stroke-width:1;
}

.dominance-demo__vector-line {
  stroke-width:2.4;
  stroke-linecap:round;
}

.dominance-demo__vector-line--unit {
  stroke:#9fb4e3;
}

.dominance-demo__vector-head--unit {
  fill:#9fb4e3;
}

.dominance-demo__vector-line--support {
  stroke:#c77dff;
}

.dominance-demo__vector-head--support {
  fill:#c77dff;
}

.dominance-demo__vector-line--total {
  stroke:#7dffb2;
}

.dominance-demo__vector-head--total {
  fill:#7dffb2;
}

.dominance-demo__vector-legend {
  display:flex;
  flex-direction:column;
  gap:4px;
  font-size:0.78rem;
  color:#cfe2ff;
}

.dominance-demo__legend-item {
  display:flex;
  align-items:center;
  gap:6px;
}

.dominance-demo__legend-item::before {
  content:'';
  width:12px;
  height:2px;
  border-radius:1px;
  background:#9fb4e3;
}

.dominance-demo__legend-item--support::before {
  background:#c77dff;
}

.dominance-demo__legend-item--total::before {
  background:#7dffb2;
}

.dominance-demo__math-table {
  width:100%;
  border-collapse:collapse;
  font-size:0.82rem;
}

.dominance-demo__math-table th,
.dominance-demo__math-table td,
.dominance-demo__math-note {
  padding:6px 8px;
  border-bottom:1px solid rgba(255,255,255,0.06);
  text-align:left;
}

.dominance-demo__math-table th {
  color:#9fb4e3;
  width:48%;
}

.dominance-demo__math-table td {
  color:#e3ebff;
  font-family:'JetBrains Mono', 'Fira Code', monospace;
}

.dominance-demo__math-note {
  color:#9fb4e3;
  font-family:'Inter', 'Segoe UI', sans-serif;
  font-size:0.74rem;
  max-width:220px;
}

.frontier-debugger {
  display:flex;
  flex-direction:column;
  gap:18px;
}

.frontier-debugger__layout {
  display:flex;
  flex-wrap:wrap;
  gap:20px;
  background:rgba(12,18,30,0.85);
  border:1px solid rgba(159,180,227,0.12);
  border-radius:12px;
  padding:18px;
}

.frontier-debugger__grid-panel {
  flex:1 1 320px;
  display:flex;
  flex-direction:column;
  gap:12px;
}

.frontier-debugger__grid {
  display:grid;
  grid-template-columns:repeat(auto-fit, minmax(120px, 1fr));
  gap:10px;
}

.frontier-debugger__cell {
  border:1px solid rgba(159,180,227,0.25);
  border-radius:8px;
  padding:10px;
  min-height:100px;
  display:flex;
  flex-direction:column;
  gap:6px;
  background:rgba(32,42,66,0.45);
  transition:transform 0.18s ease, box-shadow 0.18s ease;
}

.frontier-debugger__cell-coord {
  font-size:0.78rem;
  color:#9fb4e3;
}

.frontier-debugger__cell-faction {
  font-size:0.92rem;
  font-weight:600;
  color:#e6efff;
}

.frontier-debugger__cell-control {
  font-family:'JetBrains Mono','Fira Code',monospace;
  color:#cfe2ff;
  font-size:0.85rem;
}

.frontier-debugger__cell-frontier {
  font-size:0.78rem;
  color:#9fb4e3;
}

.frontier-debugger__cell-frontier span {
  font-family:'JetBrains Mono','Fira Code',monospace;
  color:#b5ffda;
}

.frontier-debugger__cell-frontier.is-hidden {
  display:none;
}

.frontier-debugger__cell.is-current {
  box-shadow:0 0 14px rgba(110,220,255,0.25);
  transform:translateY(-2px);
}

.frontier-debugger__cell.is-current-neighbor {
  box-shadow:0 0 10px rgba(255,196,120,0.35);
}

.frontier-debugger__cell.is-friendly {
  outline:2px solid rgba(125,255,178,0.6);
}

.frontier-debugger__cell.is-hostile {
  outline:2px solid rgba(255,128,128,0.6);
}

.frontier-debugger__cell.has-frontier {
  border-color:rgba(255,186,120,0.6);
}

.frontier-debugger__cell.frontier-deposit {
  animation:frontierPulse 0.32s ease;
}

@keyframes frontierPulse {
  from { box-shadow:0 0 0 rgba(255,186,120,0.75); }
  to { box-shadow:0 0 18px rgba(255,186,120,0.1); }
}

.frontier-debugger__sidebar {
  flex:1 1 320px;
  display:flex;
  flex-direction:column;
  gap:16px;
}

.frontier-debugger__code-panel,
.frontier-debugger__vars-panel {
  background:rgba(9,14,22,0.9);
  border:1px solid rgba(159,180,227,0.14);
  border-radius:10px;
  padding:12px;
  display:flex;
  flex-direction:column;
  gap:10px;
}

.frontier-debugger__code {
  margin:0;
  font-family:'JetBrains Mono','Fira Code',monospace;
  font-size:0.8rem;
  max-height:260px;
  overflow-y:auto;
  padding:0 6px;
}

.frontier-debugger__code div {
  padding:4px 6px;
  border-radius:4px;
}

.frontier-debugger__code div.is-active {
  background:rgba(120,180,255,0.25);
  color:#e9f3ff;
}

.frontier-debugger__code-var {
  text-decoration:underline dotted rgba(207,226,255,0.6);
  cursor:help;
}

.frontier-debugger__vars {
  display:grid;
  grid-template-columns:repeat(auto-fit, minmax(150px, 1fr));
  gap:8px;
}

.frontier-debugger__var {
  display:flex;
  justify-content:space-between;
  font-size:0.8rem;
  background:rgba(18,26,38,0.85);
  border-radius:6px;
  padding:6px 8px;
  border:1px solid rgba(159,180,227,0.1);
}

.frontier-debugger__var strong {
  color:#9fb4e3;
  margin-right:6px;
}

.frontier-debugger__var span {
  color:#e6efff;
  font-family:'JetBrains Mono','Fira Code',monospace;
}

.frontier-debugger__controls {
  display:flex;
  flex-wrap:wrap;
  gap:10px;
}

.frontier-debugger__btn {
  padding:6px 12px;
  border-radius:6px;
  border:1px solid rgba(159,180,227,0.35);
  background:#1c2a44;
  color:#dde9ff;
  cursor:pointer;
  font-size:0.85rem;
  transition:background 0.18s ease, transform 0.18s ease;
}

.frontier-debugger__btn:hover {
  background:#253452;
  transform:translateY(-1px);
}

.frontier-debugger__btn:active {
  transform:translateY(0);
}

.dominance-demo.details-enabled .dominance-demo__details-body {
  display:flex;
}

.dominance-demo.details-enabled .dominance-demo__details-toggle {
  opacity:0.6;
  cursor:not-allowed;
}

.dominance-demo.details-enabled .dominance-demo__details-toggle::after {
  content:' (global)';
  font-size:0.7rem;
  color:#9fb4e3;
}

.dominance-demo__share-wrap {
  margin-top:6px;
  display:flex;
  align-items:center;
  gap:8px;
}

.dominance-demo__share-track {
  flex:1;
  height:8px;
  border-radius:4px;
  background:rgba(255,255,255,0.08);
  overflow:hidden;
  position:relative;
}

.dominance-demo__share-bar {
  position:absolute;
  left:0;
  top:0;
  bottom:0;
  width:0;
  opacity:0;
  border-radius:4px;
}

.dominance-demo__share-label {
  font-size:0.75rem;
  color:#9fb4e3;
  min-width:2.5rem;
}

.presence-accumulation {
  display:flex;
  flex-direction:column;
  gap:16px;
}

.presence-accumulation__controls {
  display:flex;
  gap:12px;
  align-items:center;
  flex-wrap:wrap;
}


.presence-accumulation__grid {
  display:grid;
  grid-template-columns: repeat(2, minmax(320px, 1fr));
  grid-auto-rows: 260px;
  gap:16px;
}

.presence-accumulation__cell {
  position:relative;
  border-radius:8px;
  min-height:240px;
  perspective:900px;
  cursor:pointer;
}

.presence-accumulation__controls .btn {
  padding:6px 12px;
  border-radius:4px;
  background:#1a2c52;
  border:1px solid #4f63a9;
  color:#cfe2ff;
  cursor:pointer;
}

.presence-accumulation__controls .btn:hover {
  background:#24376a;
}

.presence-accumulation__cell strong {
  font-size:0.75rem;
  color:#9fb4e3;
}

.presence-accumulation__vectors {
  font-size:0.7rem;
  line-height:1.3;
  color:#c9d8ff;
}

.presence-accumulation__control {
  font-size:0.75rem;
  color:#e6edf7;
}

.presence-accumulation__control strong {
  color:#cfe2ff;
}


.presence-accumulation__legend {
  display:flex;
  gap:16px;
  font-size:0.85rem;
}

.presence-accumulation__legend span {
  display:inline-flex;
  align-items:center;
  gap:6px;
}

.presence-accumulation__legend .swatch {
  width:12px;
  height:12px;
  border-radius:2px;
  box-shadow:0 0 4px rgba(0,0,0,0.4);
}



.presence-accumulation__card{
  position:relative;
  width:100%;
  height:100%;
  transition:transform 0.6s ease;
  transform-style:preserve-3d;
}

.presence-accumulation__cell.is-flipped .presence-accumulation__card{
  transform:rotateY(180deg);
}

.presence-accumulation__face{
  position:absolute;
  inset:0;
  display:flex;
  flex-direction:column;
  justify-content:space-between;
  gap:8px;
  padding:8px;
  box-sizing:border-box;
  border-radius:inherit;
  backface-visibility:hidden;
}

.presence-accumulation__face--front{
  background:#0f192a;
  border:1px solid rgba(255,255,255,0.08);
}

.presence-accumulation__face--back{
  transform:rotateY(180deg);
  background:#0f192a;
  border:1px solid rgba(255,255,255,0.12);
  color:#c9d8ff;
}

.presence-accumulation__header{
  display:flex;
  align-items:center;
  justify-content:space-between;
}

.presence-accumulation__equations{
  font-size:0.75rem;
  line-height:1.4;
  display:flex;
  flex-direction:column;
  gap:4px;
  overflow:auto;
  flex-grow:1;
}

.presence-accumulation__equation{
  font-family:'JetBrains Mono','Fira Code',Consolas,'Courier New',monospace;
  color:#cfe2ff;
  font-size:0.7rem;
  white-space:nowrap;
}

.presence-accumulation__hint{
  font-size:0.65rem;
  letter-spacing:0.02em;
  text-transform:uppercase;
  opacity:0.55;
  text-align:center;
}

.safe-phase-demo {
  overflow-x:auto;
}

.safe-phase-table {
  width:100%;
  min-width:520px;
  border-collapse:collapse;
  font-size:0.9rem;
}

.safe-phase-table th,
.safe-phase-table td {
  padding:6px 10px;
  border-bottom:1px solid rgba(255,255,255,0.06);
  text-align:left;
}

.safe-phase-table th {
  color:#9fb4e3;
  font-weight:600;
}

.safe-phase-swatch {
  display:inline-block;
  width:12px;
  height:12px;
  border-radius:2px;
  margin-right:6px;
  box-shadow:0 0 4px rgba(0,0,0,0.4);
  vertical-align:middle;
}

.code-block {
  margin:16px 0 0;
  background:#0f192a;
  border:1px solid rgba(255,255,255,0.06);
  border-radius:6px;
  padding:16px;
  overflow:auto;
  font-size:0.9rem;
  color:#e6edf7;
}

.code-block code {
  font-family: 'JetBrains Mono', 'Fira Code', Consolas, 'Courier New', monospace;
  line-height:1.5;
}

.guide-explainer {
  margin-top:16px;
  padding:12px 16px;
  border-radius:6px;
  background:rgba(79,99,169,0.08);
  border:1px solid rgba(79,99,169,0.25);
  color:#c9d8ff;
}

.code-placeholder::before {
  content: attr(data-file) ' — lines ' attr(data-lines);
  display:block;
  font-size:0.85rem;
  color:#6d85c9;
  margin-bottom:8px;
}

.demo-placeholder::before {
  content:'Interactive demo slot: ' attr(data-demo);
  display:block;
  font-size:0.85rem;
  color:#6d85c9;
  margin-bottom:8px;
}

.reference-list {
  list-style:none;
  padding:0;
  margin:0;
  display:grid;
  gap:8px;
}

.reference-list a {
  color:#9fb4e3;
  text-decoration:none;
}

.reference-list a:hover {
  text-decoration:underline;
}

@media (max-width: 960px) {
  .guide-layout {
    grid-template-columns: 1fr;
  }
  .guide-nav {
    position:relative;
    height:auto;
    border-right:none;
    border-bottom:1px solid rgba(255,255,255,0.05);
  }
}

.presence-accumulation__agent{
  display:none;
  font-size:0.75rem;
  font-weight:600;
  padding:2px 6px;
  border-radius:4px;
  background:rgba(13,17,23,0.85);
  border:1px solid rgba(255,255,255,0.2);
}
